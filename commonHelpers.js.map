{"version":3,"file":"commonHelpers.js","sources":["../src/js/function-render.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderMarkup(data) {\n  return data.hits\n    .map(\n      el =>\n        `<div class=\"custom-gallery-item\">\n            <a class=\"custom-gallery-link\" href=\"${el.largeImageURL}\">\n                <img class=\"custom-gallery-image\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" />\n            </a>\n            <div class=\"custom-gallery-item-info\">\n                <p class=\"custom-gallery-item-info-par\">\n                    <span class=\"custom-gallery-item-info-span\">Likes: <span>${el.likes}</span>\n                    </span>\n                </p>\n                <p class=\"custom-gallery-item-info-par\">\n                    <span class=\"custom-gallery-item-info-span\">Views: <span>${el.views}</span>\n                    </span>\n                </p>\n                <p class=\"custom-gallery-item-info-par\">\n                    <span class=\"custom-gallery-item-info-span\">Comments: <span>${el.comments}</span>\n                    </span>\n                </p>\n                <p class=\"custom-gallery-item-info-par\">\n                    <span class=\"custom-gallery-item-info-span\">Downloads: <span>${el.downloads}</span>\n                    </span>\n                </p>\n            </div>\n        </div>`\n    )\n    .join('');\n}\n\nexport function showEndOfListMessage() {\n  iziToast.info({\n    timeout: 3000,\n    position: 'topRight',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n\nexport function showEmptyInputMessage() {\n  iziToast.info({\n    timeout: 3000,\n    position: 'topRight',\n    message: 'The search query can not be empty!',\n  });\n}\n\nexport function showNoImagesMessage() {\n  iziToast.error({\n    timeout: 3000,\n    position: 'topRight',\n    message:\n      'There are no images matching your search query. Please, enter something else!',\n  });\n}\n","import axios from 'axios';\nexport async function fetchImages(searchWord, currPage) {\n  try {\n    const KEY = '43280076-efaf032a147c4a401dc5ab87e';\n    const URL = 'https://pixabay.com/api/';\n    const resp = await axios.get(URL, {\n      params: {\n        key: KEY,\n        q: searchWord,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currPage,\n        per_page: 15,\n      },\n    });\n    return resp.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  renderMarkup,\n  showEndOfListMessage,\n  showEmptyInputMessage,\n  showNoImagesMessage,\n} from './js/function-render';\n\nimport { fetchImages } from './js/pixabay-api.js';\n\nconst lightbox = new SimpleLightbox('.custom-gallery a', {\n  nav: true,\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 150,\n});\n\nconst form = document.querySelector('.custom-search-form');\nconst container = document.querySelector('.custom-gallery');\nconst loader = document.querySelector('.custom-loader');\nconst loadMoreBtn = document.querySelector('.custom-load-btn');\n\nlet hasMoreResults = true;\nlet searchTerm = '';\nlet currentPage;\nloadMoreBtn.style.display = 'none';\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSubmit(event) {\n  currentPage = 1;\n  event.preventDefault();\n  container.innerHTML = '';\n  searchTerm = form.elements.customSearchWord.value.trim();\n  loadMoreBtn.style.display = 'none';\n\n  if (searchTerm === '') {\n    showEmptyInputMessage();\n    container.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n    form.reset();\n    return;\n  }\n  loader.style.display = 'block';\n\n  try {\n    const images = await fetchImages(searchTerm, currentPage).then(data => {\n      const markup = renderMarkup(data);\n      if (data.hits.length === 0) {\n        showNoImagesMessage();\n        loader.style.display = 'none';\n        return;\n      }\n      container.insertAdjacentHTML('beforeend', markup);\n      loader.style.display = 'none';\n      lightbox.refresh();\n      if (data.hits.length <= 14) {\n        hasMoreResults = false;\n      } else {\n        hasMoreResults = true;\n        loadMoreBtn.style.display = 'block';\n      }\n    });\n  } catch (error) {\n    console.error('Error:', error);\n  }\n  form.reset();\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  try {\n    loadMoreBtn.style.display = 'none';\n    const images = await fetchImages(searchTerm, currentPage).then(data => {\n      const markup = renderMarkup(data);\n      container.insertAdjacentHTML('beforeend', markup);\n\n      lightbox.refresh();\n\n      const containerHeight = container.getBoundingClientRect().height;\n      window.scrollBy({\n        top: 2 * containerHeight,\n        behavior: 'smooth',\n      });\n\n      if (data.hits.length <= 14) {\n        showEndOfListMessage();\n        hasMoreResults = false;\n      } else {\n        hasMoreResults = true;\n        loadMoreBtn.style.display = 'block';\n      }\n    });\n  } catch (error) {\n    console.error('Error:', error);\n  }\n}\n"],"names":["renderMarkup","data","el","showEndOfListMessage","iziToast","showEmptyInputMessage","showNoImagesMessage","fetchImages","searchWord","currPage","KEY","URL","axios","error","lightbox","SimpleLightbox","form","container","loader","loadMoreBtn","hasMoreResults","searchTerm","currentPage","onSubmit","onLoadMore","event","images","markup","containerHeight"],"mappings":"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"}